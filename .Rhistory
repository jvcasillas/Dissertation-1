legend.key = element_blank(),
legend.background = element_blank(),
strip.background = element_blank(),
axis.title.y = element_text(size = rel(.9), hjust = 0.95),
axis.title.x = element_text(size = rel(.9)),
legend.key.size = unit(0.75, 'lines'),
legend.text = element_text(size = 6),
legend.title = element_text(size = 7),
plot.margin = unit(rep(2, 4), "mm"),
panel.grid.major = element_line(colour = 'grey90', size = 0.15),
panel.grid.minor = element_line(colour = 'grey90', size = 0.15)
)
ggsave(paste0(figs_path, "/stress_dele_l1.png"), stress_dele_l1, width = 150,
height = 120, units = "mm", dpi = 600)
# Set path for saving figs
figs_path <- here("figs", "stress", "gca")
ggsave(paste0(figs_path, "/stress_dele_l1.png"), stress_dele_l1, width = 150,
height = 120, units = "mm", dpi = 600)
ggsave(paste0(figs_path, "/stress_dele_split.png"), stress_dele_split, width = 150,
height = 120, units = "mm", dpi = 600)
ggsave(paste0(figs_path, "/stress_use_cond.png"), stress_use_cond, width = 150,
height = 120, units = "mm", dpi = 600)
ggsave(paste0(figs_path, "/stress_dele_cond.png"), stress_dele_cond, width = 150,
height = 120, units = "mm", dpi = 600)
ggsave(paste0(figs_path, "/stress_wm_l1.png"), stress_wm_l1, width = 150,
height = 120, units = "mm", dpi = 600)
ggsave(paste0(figs_path, "/stress_wm_split.png"), stress_wm_split, width = 150,
height = 120, units = "mm", dpi = 600)
ggsave(paste0(figs_path, "/stress_use_l1.png"), stress_use_l1, width = 150,
height = 120, units = "mm", dpi = 600)
ggsave(paste0(figs_path, "/stress_use_split.png"), stress_use_split, width = 150,
height = 120, units = "mm", dpi = 600)
ggsave(paste0(figs_path, "/stress_wm_cond.png"), stress_wm_cond, width = 150,
height = 120, units = "mm", dpi = 600)
source(here::here("scripts", "00_load_libs.R"))
# Load data
source(here::here("scripts", "02_load_data.R"))
# Get path to saved models
gca_mods_path  <- here("mods", "stress", "gca")
# Load models as lists
load(paste0(gca_mods_path, "/full_mods.Rdata"))
load(paste0(gca_mods_path, "/nested_model_comparisons.Rdata"))
# Load models as lists
load(paste0(gca_mods_path, "/gca_mon_mods.Rdata"))
load(paste0(gca_mods_path, "/gca_l2_mods.Rdata"))
load(paste0(gca_mods_path, "/nested_model_comparisons.Rdata"))
load(paste0(gca_mods_path, "/model_preds.Rdata"))
load(paste0(gca_mods_path, "/model_preds_mon.Rdata"))
source(paste0(gca_mods_path, "/model_preds_mon.Rdata"))
# Store objects in global env
list2env(gca_mon_mods, globalenv())
list2env(gca_l2_mods, globalenv())
list2env(nested_model_comparisons, globalenv())
list2env(model_preds, globalenv())
wm <- read_csv("./data/clean/ospan_set_z_scores.csv")
stress_50 <- merge(x = stress50, y = wm, by = "participant", all.x=TRUE)
stress_gc_subset <- stress_50 %>%
select(., -WM_set) %>%
filter(., time_zero >= -4 & time_zero <= 12) %>%
mutate(., l1 = fct_relevel(l1, "es", "en", "ma"),
condition_sum = if_else(cond == "1", 1, -1)) %>%       # 1 = present, 2 = past
poly_add_columns(., time_zero, degree = 3, prefix = "ot")
summary(gca_mod_mon_base)
library("papaja")
library("officer")
library("flextable")
params <- gca_mon_mods$gca_mod_mon_base %>%
tidy_lme4() %>%
rename(B = Estimate)
params$subscript <-
c(paste0(0:3, 0))
params <- tibble::column_to_rownames(params, 'subscript')
params$subscript <-
c(paste0(0:3, 0))
params
library("papaja")
library("officer")
library("flextable")
source(here::here("scripts", "02_load_data.R"))
source(here::here("scripts", "02_load_data.R"))
source(here::here("scripts", "01_helpers.R"))
glmm_mods_path  <- here("mods", "stress", "glmm")
load(paste0(gca_mods_path, "/onset_c2/mon_onset_c2_final.rds"))
load(paste0(glmm_mods_path, "/onset_c2/mon_onset_c2_final.rds"))
readRDS(glmm_mods_path, "/onset_c2/mon_onset_c2_final.rds"))
readRDS(glmm_mods_path, "/onset_c2/mon_onset_c2_final.rds")
readRDS(file = here("mods", "stress", "glmm", "onset_c2", "mon_onset_c2_final.rds")
readRDS(file = here("mods", "stress", "glmm", "onset_c2", "mon_onset_c2_final.rds"))
readRDS(file = here("mods", "stress", "glmm", "onset_c2", "mon_onset_c2_final.Rdata"))
readRDS(here("mods", "stress", "glmm", "onset_c2", "mon_onset_c2_final.rds"))
mon_onset_v1_final <- readRDS(here("mods", "stress", "glmm", "onset_v1", "mon_onset_v1_final.rds"))
l2_onset_c3_final <- readRDS(here("mods", "stress", "glmm", "onset_c3", "l2_onset_c3_final.rds"))
l2_onset_c3_dele <- readRDS(here("mods", "stress", "glmm", "onset_c3", "l2_onset_c3_dele_final.rds"))
l2_onset_c3_use <- readRDS(here("mods", "stress", "glmm", "onset_c3", "l2_onset_c3_use_final.rds"))
l2_onset_c3_dele
summary(l2_onset_c3_dele)
fixef(l2_onset_c3_dele)
l2_onset_c2_dele %>%
tidy_lme4()
l2_onset_c3_dele %>%
tidy_lme4()
l2_onset_c3_dele %>%
tidy_lme4() %>%
mutate(p = format_pval(p),
Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p)
# Get full mod and make it pretty for the table
pretty_fixed_effects <- l2_onset_c3_dele %>%
tidy_lme4() %>%
mutate(p = format_pval(p),
Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p)
# Include gammas (Gij) after each parameter name
subs <- c(paste0(0:3, 0), paste0(0:3, 1),
paste0(0:2, 2))
var_labels <- parenthesize(paste0(emphasize("&gamma;"), "~", subs, "~"))
pretty_fixed_effects$Parameter %<>% paste(., var_labels)
# Include gammas (Gij) after each parameter name
subs <- c(paste0(0:3, 0))
var_labels <- parenthesize(paste0(emphasize("&gamma;"), "~", subs, "~"))
pretty_fixed_effects$Parameter %<>% paste(., var_labels)
# Include gammas (Gij) after each parameter name
subs <- c(paste0(0:2, 0))
var_labels <- parenthesize(paste0(emphasize("&gamma;"), "~", subs, "~"))
pretty_fixed_effects$Parameter %<>% paste(., var_labels)
pretty_fixed_effects %>%
select(-effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
# Get full mod and make it pretty for the table
pretty_fixed_effects <- l2_onset_c3_dele %>%
tidy_lme4() %>%
# mutate(p = format_pval(p),
#        Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p)
# Include gammas (Gij) after each parameter name
subs <- c(paste0(0:2, 0))
var_labels <- parenthesize(paste0(emphasize("&gamma;"), "~", subs, "~"))
pretty_fixed_effects$Parameter %<>% paste(., var_labels)
pretty_fixed_effects %>%
select(-effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
# Get full mod and make it pretty for the table
pretty_fixed_effects <- l2_onset_c3_dele %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t) %>%
select(-p)
# Include gammas (Gij) after each parameter name
subs <- c(paste0(0:2, 0))
var_labels <- parenthesize(paste0(emphasize("&gamma;"), "~", subs, "~"))
pretty_fixed_effects$Parameter %<>% paste(., var_labels)
pretty_fixed_effects %>%
select(-effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
# Get full mod and make it pretty for the table
pretty_fixed_effects <- l2_onset_c3_dele %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p.value) %>%
select(-p)
# Include gammas (Gij) after each parameter name
subs <- c(paste0(0:2, 0))
var_labels <- parenthesize(paste0(emphasize("&gamma;"), "~", subs, "~"))
pretty_fixed_effects$Parameter %<>% paste(., var_labels)
pretty_fixed_effects %>%
select(-effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
l2_onset_c3_dele
summary(l2_onset_c3_dele)
# Get full mod and make it pretty for the table
pretty_fixed_effects <- l2_onset_c3_dele %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p.value) %>%
select(-p, -effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
# Get full mod and make it pretty for the table
pretty_fixed_effects <- l2_onset_c3_dele %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p.value) %>%
select(-p, -effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
# Get full mod and make it pretty for the table
l2_onset_c3_dele %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p.value) %>%
select(-p, -effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
# Get full mod and make it pretty for the table
l2_onset_c3_use %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p.value) %>%
select(-p, -effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
# Get full mod and make it pretty for the table
mon_onset_v1_final %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p.value) %>%
select(-p, -effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
summary(mon_onset_v1_final)
mon_onset_v1_final %>% # Ranef same for DELE and USE
tidy_ranef_summary %>%
# Format the numbers
mutate_each(funs(format_fixef_num), vcov, sdcor) %>%
mutate_each(funs(format_cor), -var1, -grp, -vcov, -sdcor) %>%
sort_ranef_grps %>%
# Format variable names and group names
mutate(var1 = fix_param_names(var1) %>% blank_nas,
grp =  blank_same_as_last(grp) %>% fix_param_names) %>%
rename(Group = grp, Parameter = var1, Variance = vcov, SD = sdcor)
# Correlation columns need names with characters so that pandoc can align them
names(ranef_table)[5:9] <-
c("Correlations", "&nbsp;", " &nbsp;", "  &nbsp;", "  &nbsp;")
ranef_table <- gca_l2_mods$gca_l2_mod_use_final %>% # Ranef same for DELE and USE
tidy_ranef_summary %>%
# Format the numbers
mutate_each(funs(format_fixef_num), vcov, sdcor) %>%
mutate_each(funs(format_cor), -var1, -grp, -vcov, -sdcor) %>%
sort_ranef_grps %>%
# Format variable names and group names
mutate(var1 = fix_param_names(var1) %>% blank_nas,
grp =  blank_same_as_last(grp) %>% fix_param_names) %>%
rename(Group = grp, Parameter = var1, Variance = vcov, SD = sdcor)
ranef_table <- mon_onset_v1_final %>% # Ranef same for DELE and USE
tidy_ranef_summary %>%
# Format the numbers
mutate_each(funs(format_fixef_num), vcov, sdcor) %>%
mutate_each(funs(format_cor), -var1, -grp, -vcov, -sdcor) %>%
sort_ranef_grps %>%
# Format variable names and group names
mutate(var1 = fix_param_names(var1) %>% blank_nas,
grp =  blank_same_as_last(grp) %>% fix_param_names) %>%
rename(Group = grp, Parameter = var1, Variance = vcov, SD = sdcor)
# Correlation columns need names with characters so that pandoc can align them
names(ranef_table)[5:9] <-
c("Correlations", "&nbsp;", " &nbsp;", "  &nbsp;", "  &nbsp;")
ranef_table
ranef_table <- gca_l2_mods$gca_l2_mod_use_final %>% # Ranef same for DELE and USE
tidy_ranef_summary %>%
# Format the numbers
mutate_each(funs(format_fixef_num), vcov, sdcor) %>%
mutate_each(funs(format_cor), -var1, -grp, -vcov, -sdcor) %>%
sort_ranef_grps %>%
# Format variable names and group names
mutate(var1 = fix_param_names(var1) %>% blank_nas,
grp =  blank_same_as_last(grp) %>% fix_param_names) %>%
rename(Group = grp, Parameter = var1, Variance = vcov, SD = sdcor)
ranef_table <- mon_onset_v1_final %>% # Ranef same for DELE and USE
tidy_ranef_summary %>%
# Format the numbers
mutate_each(funs(format_fixef_num), vcov, sdcor) %>%
mutate_each(funs(format_cor), -var1, -grp, -vcov, -sdcor) %>%
sort_ranef_grps %>%
# Format variable names and group names
mutate(var1 = fix_param_names(var1) %>% blank_nas,
grp =  blank_same_as_last(grp) %>% fix_param_names) %>%
rename(Group = grp, Parameter = var1, Variance = vcov, SD = sdcor)
ranef_table
# Correlation columns need names with characters so that pandoc can align them
names(ranef_table)[2:6] <-
c("Correlations", "&nbsp;", " &nbsp;", "  &nbsp;", "  &nbsp;")
ranef_table %>%
knitr::kable(format = "pandoc", align = str_tokenize("llrrrrrr"))
# Get full mod and make it pretty for the table
mon_onset_v1_final %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p.value) %>%
select(-p, -effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
ranef_table <- mon_onset_v1_final %>% # Ranef same for DELE and USE
tidy_ranef_summary %>%
# Format the numbers
mutate_each(funs(format_fixef_num), vcov, sdcor) %>%
mutate_each(funs(format_cor), -var1, -grp, -vcov, -sdcor) %>%
sort_ranef_grps %>%
# Format variable names and group names
mutate(var1 = fix_param_names(var1) %>% blank_nas,
grp =  blank_same_as_last(grp) %>% fix_param_names) %>%
rename(Group = grp, Parameter = var1, Variance = vcov, SD = sdcor)
# Correlation columns need names with characters so that pandoc can align them
names(ranef_table)[2:6] <-
c("Correlations", "&nbsp;", " &nbsp;", "  &nbsp;", "  &nbsp;")
ranef_table %>%
knitr::kable(format = "pandoc", align = str_tokenize("llrrrrrr"))
source(here::here("scripts", "00_load_libs.R"))
# source(here::here("scripts", "02_load_data.R"))
stress10 <- read_csv(here::here("data", 'clean', 'stress_10ms_final_onset_c3.csv'))
df_stress <- stress10 %>%
filter(., time_zero == 20) %>%
mutate(., condition_sum = if_else(cond == "1", 1, -1)) #   1 = present
stress_l2 <- df_stress %>%
filter(., l1 != 'es') %>%
mutate(., l1 = fct_relevel(l1, "en", "ma"))
prop_0_l2_mod_0 <- glmer(cbind(target_count, 10 - target_count) ~ 1 +
(1 + condition_sum | participant) +
(1 | target),
data = stress_l2, family = 'binomial',
control = glmerControl(optimizer = 'bobyqa'))
prop_0_l2_mod_l1    <- update(prop_0_l2_mod_0,     . ~ . + l1)
prop_0_l2_mod_cond  <- update(prop_0_l2_mod_l1,    . ~ . + condition_sum)
prop_0_l2_mod_int   <- update(prop_0_l2_mod_cond,  . ~ . + l1:condition_sum)
anova(prop_0_l2_mod_0, prop_0_l2_mod_l1, test = "Chisq")
anova(prop_0_l2_mod_l1, prop_0_l2_mod_cond, test = "Chisq")
anova(prop_0_l2_mod_l1, prop_0_l2_mod_int, test = "Chisq")
prop_0_l2_mod_wm       <- update(prop_0_l2_mod_l1,  . ~ . + ospan)
prop_0_l2_mod_int_wm   <- update(prop_0_l2_mod_wm,    . ~ . + l1:condition_sum:ospan)
anova(prop_0_l2_mod_l1, prop_0_l2_mod_wm, test = "Chisq")
anova(prop_0_l2_mod_l1, prop_0_l2_mod_int_wm, test = "Chisq") # no interaction wm x condition
l2_onset_c3_wm_final <- prop_0_l2_mod_l1
summary(l2_onset_c3_wm_final)
prop_0_l2_mod_dele       <- update(prop_0_l2_mod_l1,  . ~ . + DELE_z)
prop_0_l2_mod_int_dele   <- update(prop_0_l2_mod_dele,  . ~ . + l1:condition_sum:DELE_z)
anova(prop_0_l2_mod_l1, prop_0_l2_mod_dele, test = "Chisq")
anova(prop_0_l2_mod_dele, prop_0_l2_mod_int_dele, test = "Chisq") # no interaction wm x condition
l2_onset_c3_dele_final <- prop_0_l2_mod_dele
summary(l2_onset_c3_dele_final)
prop_0_l2_mod_use  <- update(prop_0_l2_mod_l1,  . ~ . + use_z)
prop_0_l2_mod_int_use   <- update(prop_0_l2_mod_use,  . ~ . + l1:condition_sum:use_z)
anova(prop_0_l2_mod_l1, prop_0_l2_mod_use, test = "Chisq")
anova(prop_0_l2_mod_use, prop_0_l2_mod_int_use, test = "Chisq")
l2_onset_c3_use_final <- prop_0_l2_mod_use
summary(l2_onset_c3_use_final)
# load data
stress10 <- read.delim(here("data", "stress_10bin.txt"))
# Read data
stress10 <- stress10 %>%
# create variable group
separate(., col = RECORDING_SESSION_LABEL,
into = c("group", "group_member"),
sep = 3,
remove = FALSE) %>%
#select and rename variables of interest
select(., RECORDING_SESSION_LABEL, TRIAL_INDEX, BIN_INDEX,
AVERAGE_IA_0_SAMPLE_COUNT, AVERAGE_IA_0_SAMPLE_COUNT_.,
AVERAGE_IA_1_SAMPLE_COUNT, AVERAGE_IA_1_SAMPLE_COUNT_.,
AVERAGE_IA_2_SAMPLE_COUNT, AVERAGE_IA_2_SAMPLE_COUNT_.,
ACCURACY, RT, block, cond,
id, lex_freq, phonot_freq,
t01, t02, t03, t04, t05, t06, t07, target, version, group) %>%
dplyr::rename(., participant = RECORDING_SESSION_LABEL,
trial = TRIAL_INDEX,
bin = BIN_INDEX,
target_count = AVERAGE_IA_1_SAMPLE_COUNT,
target_prop = AVERAGE_IA_1_SAMPLE_COUNT_.,
offset_prev_word = t01,
onset_v1 = t02,
onset_c2 = t03,
onset_c3 = t04,
onset_v2 = t05,
offset_target = t06,
endSentence = t07,
sentence_id = id) %>%
# remove incorrect
filter(., ACCURACY == 1) %>%
# drop unused levels of factors
droplevels(.) %>%
# Create eLog variable and respective wts
mutate(.,eLog = log((target_count + 0.5) / (10 - target_count + 0.5)),
wts = 1 / (target_count + 0.5) + 1 / (10 - target_count + 0.5)) %>%
# CHANGE onset_c3 DEPENDING ON TRIGGER TO ANALYZE
dplyr::select(participant, group, target, cond, target, bin,
target_count, target_prop, eLog, wts, onset_c2) %>%
gather(., landmark, lm_bin, -c(participant:wts)) %>%
mutate(., lm_bin = (lm_bin / 10) %>% ceiling(.),
t_onset = if_else(bin == lm_bin, TRUE, FALSE)) %>%
group_by(., participant, target) %>%
mutate(., time_zero = onset_pupil(bin, t_onset, event = c("TRUE"))) %>%
ungroup(.)
# Load verbal WM
dem <- read_csv(here("data", "pupurri_analysis.csv"))
dem <- dem %>%
select(., participant, DELE, percent_l2_week, WM_set)
dem$participant <- tolower(dem$participant)
dem$DELE <- as.numeric(dem$DELE)
# Add verbal wm score to eyetracking data frame
stress10 <- merge(x = stress10, y = dem, by = "participant", all.x=TRUE)
# Create L1 column
stress10 <- separate(data = stress10,
col = group,
into = c("prof", "l1"),
sep = 1,
remove = FALSE)
stress10$l1 <- str_replace(stress10$l1, "es", "en")
stress10$l1 <- str_replace(stress10$l1, "ms", "ma")
stress10$l1 <- str_replace(stress10$l1, "on", "es")
# This needs to be updated for all df at triggers other than C3
stress10$DELE[is.na(stress10$DELE) & stress10$l1 == 'es'] <- 56
stress10$percent_l2_week[is.na(stress10$percent_l2_week) & stress10$l1 == 'es'] <- 0
stress10 <- stress10 %>%
# mutate(DELE = DELE + runif(n(), min = -0.15, max = 0.15) * (n() > 1)) %>%
mutate(., ospan = (WM_set - mean(WM_set))/sd(WM_set),
use_z = (percent_l2_week - mean(percent_l2_week))/sd(percent_l2_week),
DELE_z = (DELE - mean(DELE))/sd(DELE)
)
write_csv(stress10, here("data", "clean", "stress_10ms_final_onset_c2.csv"))
# source(here::here("scripts", "02_load_data.R"))
stress10 <- read_csv(here::here("data", 'clean', 'stress_10ms_final_onset_c2.csv'))
df_stress <- stress10 %>%
filter(., time_zero == 20) %>%
mutate(., condition_sum = if_else(cond == "1", 1, -1)) #   1 = present
stress_l2 <- df_stress %>%
filter(., l1 != 'es') %>%
mutate(., l1 = fct_relevel(l1, "en", "ma"))
prop_0_l2_mod_0 <- glmer(cbind(target_count, 10 - target_count) ~ 1 +
(1 + condition_sum | participant) +
(1 | target),
data = stress_l2, family = 'binomial',
control = glmerControl(optimizer = 'bobyqa'))
prop_0_l2_mod_l1    <- update(prop_0_l2_mod_0,     . ~ . + l1)
prop_0_l2_mod_cond  <- update(prop_0_l2_mod_l1,    . ~ . + condition_sum)
prop_0_l2_mod_int   <- update(prop_0_l2_mod_cond,  . ~ . + l1:condition_sum)
anova(prop_0_l2_mod_0, prop_0_l2_mod_l1, test = "Chisq")
anova(prop_0_l2_mod_0, prop_0_l2_mod_cond, test = "Chisq")
anova(prop_0_l2_mod_0, prop_0_l2_mod_int, test = "Chisq")
prop_0_l2_mod_wm       <- update(prop_0_l2_mod_0,  . ~ . + ospan)
prop_0_l2_mod_int_wm   <- update(prop_0_l2_mod_wm,    . ~ . + l1:condition_sum:ospan)
anova(prop_0_l2_mod_0, prop_0_l2_mod_wm, test = "Chisq")
anova(prop_0_l2_mod_0, prop_0_l2_mod_int_wm, test = "Chisq") # no interaction wm x condition
l2_onset_c2_all_final <- prop_0_l2_mod_0
summary(l2_onset_c2_all_final)
prop_0_l2_mod_dele       <- update(prop_0_l2_mod_0,  . ~ . + DELE)
prop_0_l2_mod_int_dele   <- update(prop_0_l2_mod_dele,  . ~ . + l1:condition_sum:DELE)
anova(prop_0_l2_mod_0, prop_0_l2_mod_dele, test = "Chisq")
prop_0_l2_mod_dele       <- update(prop_0_l2_mod_0,  . ~ . + DELE_z)
prop_0_l2_mod_int_dele   <- update(prop_0_l2_mod_dele,  . ~ . + l1:condition_sum:DELE_z)
anova(prop_0_l2_mod_0, prop_0_l2_mod_dele, test = "Chisq")
anova(prop_0_l2_mod_0, prop_0_l2_mod_int_dele, test = "Chisq") # no interaction wm x condition
prop_0_l2_mod_use  <- update(prop_0_l2_mod_0,  . ~ . + percent_l2_week)
anova(prop_0_l2_mod_0, prop_0_l2_mod_use, test = "Chisq")
prop_0_l2_mod_int_use   <- update(prop_0_l2_mod_0,  . ~ . + l1:condition_sum:percent_l2_week)
anova(prop_0_l2_mod_0, prop_0_l2_mod_int_use, test = "Chisq")
# source(here::here("scripts", "02_load_data.R"))
stress10 <- read_csv(here::here("data", 'clean', 'stress_10ms_final_onset_c3.csv'))
df_stress <- stress10 %>%
filter(., time_zero == 20) %>%
mutate(., condition_sum = if_else(cond == "1", 1, -1)) #   1 = present
stress_l2 <- df_stress %>%
filter(., l1 != 'es') %>%
mutate(., l1 = fct_relevel(l1, "en", "ma"))
prop_0_l2_mod_0 <- glmer(cbind(target_count, 10 - target_count) ~ 1 +
(1 + condition_sum | participant) +
(1 | target),
data = stress_l2, family = 'binomial',
control = glmerControl(optimizer = 'bobyqa'))
prop_0_l2_mod_l1    <- update(prop_0_l2_mod_0,     . ~ . + l1)
prop_0_l2_mod_cond  <- update(prop_0_l2_mod_l1,    . ~ . + condition_sum)
prop_0_l2_mod_int   <- update(prop_0_l2_mod_cond,  . ~ . + l1:condition_sum)
anova(prop_0_l2_mod_0, prop_0_l2_mod_l1, test = "Chisq")
anova(prop_0_l2_mod_l1, prop_0_l2_mod_cond, test = "Chisq")
anova(prop_0_l2_mod_l1, prop_0_l2_mod_int, test = "Chisq")
prop_0_l2_mod_wm       <- update(prop_0_l2_mod_l1,  . ~ . + ospan)
prop_0_l2_mod_int_wm   <- update(prop_0_l2_mod_wm,    . ~ . + l1:condition_sum:ospan)
anova(prop_0_l2_mod_l1, prop_0_l2_mod_wm, test = "Chisq")
anova(prop_0_l2_mod_l1, prop_0_l2_mod_int_wm, test = "Chisq") # no interaction wm x condition
l2_onset_c3_wm_final <- prop_0_l2_mod_l1
summary(l2_onset_c3_wm_final)
prop_0_l2_mod_dele       <- update(prop_0_l2_mod_l1,  . ~ . + DELE_z)
prop_0_l2_mod_int_dele   <- update(prop_0_l2_mod_dele,  . ~ . + l1:condition_sum:DELE_z)
anova(prop_0_l2_mod_l1, prop_0_l2_mod_dele, test = "Chisq")
anova(prop_0_l2_mod_dele, prop_0_l2_mod_int_dele, test = "Chisq") # no interaction wm x condition
l2_onset_c3_dele_final <- prop_0_l2_mod_dele
summary(l2_onset_c3_dele_final)
prop_0_l2_mod_use  <- update(prop_0_l2_mod_l1,  . ~ . + use_z)
prop_0_l2_mod_int_use   <- update(prop_0_l2_mod_use,  . ~ . + l1:condition_sum:use_z)
anova(prop_0_l2_mod_l1, prop_0_l2_mod_use, test = "Chisq")
anova(prop_0_l2_mod_use, prop_0_l2_mod_int_use, test = "Chisq")
l2_onset_c3_use_final <- prop_0_l2_mod_use
summary(l2_onset_c3_use_final)
saveRDS(l2_onset_c3_wm_final, here("mods", "stress",
"glmm", "onset_c3", "l2_onset_c3_wm_final_z.rds"))
saveRDS(l2_onset_c3_dele_final, here("mods", "stress",
"glmm", "onset_c3", "l2_onset_c3_wm_final_z.rds"))
l2_onset_c3_dele <- readRDS(here("mods", "stress", "glmm", "onset_c3", "l2_onset_c3_dele_final_z.rds"))
saveRDS(l2_onset_c3_dele_final, here("mods", "stress",
"glmm", "onset_c3", "l2_onset_c3_dele_final_z.rds"))
saveRDS(l2_onset_c3_use_final, here("mods", "stress",
"glmm", "onset_c3", "l2_onset_c3_use_final_z.rds"))
l2_onset_c3_dele <- readRDS(here("mods", "stress", "glmm", "onset_c3", "l2_onset_c3_dele_final_z.rds"))
l2_onset_c3_dele <- readRDS(here("mods", "stress", "glmm", "onset_c3", "l2_onset_c3_dele_final_z.rds"))
# Get full mod and make it pretty for the table
l2_onset_c3_dele %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p.value) %>%
select(-p, -effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
# Get full mod and make it pretty for the table
l2_onset_c3_use %>%
tidy_lme4() %>%
mutate(Parameter = fix_param_names(Parameter)) %>%
mutate_each(funs(format_fixef_num), Estimate:t) %>%
rename(`_t_` = t, `_p_` = p.value) %>%
select(-p, -effect) %>%
knitr::kable(format = "pandoc", align = str_tokenize("lrrrr"))
